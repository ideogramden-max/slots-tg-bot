<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>FastMoney - Mafia</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="stylesheet" href="style.css">     <!-- –ì–ª–æ–±–∞–ª—å–Ω—ã–π -->
    <link rel="stylesheet" href="mafia.css">     <!-- –£–Ω–∏–∫–∞–ª—å–Ω—ã–π -->
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body class="mafia-body">

    <!-- –§–æ–Ω: –ù—É–∞—Ä–Ω—ã–π –≥–æ—Ä–æ–¥ -->
    <div class="rain-bg"></div>
    <div class="smoke-overlay"></div>
    <div class="vignette"></div>

    <!-- –•–µ–¥–µ—Ä -->
    <header class="game-header">
        <button class="back-btn" onclick="window.location.href='gamelist.html'">
            <i class="fa-solid fa-arrow-left"></i>
        </button>
        <div class="balance-container">
            <span class="label">–ë–ê–õ–ê–ù–°</span>
            <div class="balance-val"><span id="balance-display">Loading...</span> <span id="currency-display">$</span></div>
        </div>
        <button class="icon-btn" onclick="openInfoModal()"><i class="fa-solid fa-book-skull"></i></button>
    </header>

    <!-- –û–°–ù–û–í–ù–ê–Ø –°–¶–ï–ù–ê -->
    <main class="mafia-stage">
        
        <!-- –§–∞–∑–∞ –∏–≥—Ä—ã (–î–µ–Ω—å/–ù–æ—á—å) -->
        <div class="phase-indicator" id="phase-indicator">
            <i class="fa-solid fa-sun"></i> <span>–î–ï–ù–¨ 1</span>
        </div>

        <!-- –ò–≥—Ä–æ–≤–æ–π —Å—Ç–æ–ª (8 –º–µ—Å—Ç) -->
        <div class="table-area">
            <div class="players-grid" id="players-grid">
                <!-- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è JS: 
                     <div class="player-seat" onclick="targetPlayer(0)">
                        <div class="avatar"><img src="..."></div>
                        <div class="p-status">–ñ–∏–≤</div>
                        <span class="p-name">–ò–≥—Ä–æ–∫ 1</span>
                     </div>
                -->
            </div>
            
            <!-- –¶–µ–Ω—Ç—Ä —Å—Ç–æ–ª–∞ (–õ–æ–≥ —Å–æ–±—ã—Ç–∏–π) -->
            <div class="table-center">
                <div class="game-log" id="game-log">
                    <div class="log-entry">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ì–æ—Ä–æ–¥...</div>
                    <div class="log-entry">–°–¥–µ–ª–∞–π—Ç–µ —Å—Ç–∞–≤–∫—É, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Ä–æ–ª—å.</div>
                </div>
            </div>
        </div>

        <!-- –í–∞—à–∞ —Ä–æ–ª—å (–ö–∞—Ä—Ç–æ—á–∫–∞) -->
        <div class="my-role-panel hidden" id="my-role-panel">
            <div class="role-card-mini">
                <div class="r-icon" id="my-role-icon"><i class="fa-solid fa-user"></i></div>
                <div class="r-info">
                    <span class="r-name" id="my-role-name">–ú–∏—Ä–Ω—ã–π</span>
                    <span class="r-obj" id="my-role-obj">–í—ã—á–∏—Å–ª–∏ –º–∞—Ñ–∏—é</span>
                </div>
                <div class="r-mult" id="my-role-mult">x1.5</div>
            </div>
        </div>

    </main>

    <!-- –ù–ò–ñ–ù–Ø–Ø –ü–ê–ù–ï–õ–¨ -->
    <footer class="mafia-controls">
        
        <!-- –ü–ê–ù–ï–õ–¨ –°–¢–ê–í–û–ö (–ù–∞—á–∞–ª–æ) -->
        <div class="bet-panel" id="bet-panel">
            <div class="bet-header">–¶–ï–ù–ê –í–•–û–î–ê –í –°–ï–ú–¨–Æ</div>
            <div class="bet-row">
                <button id="btn-dec" class="step-btn">-</button>
                <span id="bet-amount">100</span>
                <button id="btn-inc" class="step-btn">+</button>
                <button class="start-btn" onclick="startGame()">–ü–û–õ–£–ß–ò–¢–¨ –†–û–õ–¨</button>
            </div>
        </div>

        <!-- –ü–ê–ù–ï–õ–¨ –î–ï–ô–°–¢–í–ò–ô (–í –∏–≥—Ä–µ) -->
        <div class="action-panel hidden" id="action-panel">
            <div class="action-text" id="action-text">–ñ–¥–µ–º –Ω–æ—á–∏...</div>
            <button id="action-btn" class="main-action-btn" disabled onclick="confirmAction()">
                –î–ï–ô–°–¢–í–ò–ï
            </button>
            <button id="skip-btn" class="skip-btn hidden" onclick="skipNight()">–ü–†–û–ü–£–°–¢–ò–¢–¨ –ù–û–ß–¨</button>
        </div>

    </footer>

    <!-- –ú–û–î–ê–õ–ö–ò -->

    <!-- –í—ã–ø–∞–¥–µ–Ω–∏–µ —Ä–æ–ª–∏ (–ê–Ω–∏–º–∞—Ü–∏—è) -->
    <div id="modal-role" class="modal-overlay hidden">
        <div class="role-reveal-card" id="reveal-card">
            <div class="card-face back">
                <i class="fa-solid fa-question"></i>
            </div>
            <div class="card-face front">
                <div class="role-img" id="reveal-icon"><i class="fa-solid fa-user-secret"></i></div>
                <h2 id="reveal-title">–ú–ê–§–ò–Ø</h2>
                <p id="reveal-desc">–£–±–µ–π—Ç–µ –≤—Å–µ—Ö –º–∏—Ä–Ω—ã—Ö.</p>
                <div class="reveal-mult" id="reveal-mult">x2.0</div>
                <button class="claim-btn" onclick="acceptRole()">–ù–ê–ß–ê–¢–¨</button>
            </div>
        </div>
    </div>

    <!-- –ü–æ–±–µ–¥–∞/–ü–æ—Ä–∞–∂–µ–Ω–∏–µ -->
    <div id="modal-end" class="modal-overlay hidden">
        <div class="end-card">
            <h1 id="end-title">–ü–û–ë–ï–î–ê</h1>
            <div class="end-icon" id="end-icon">üèÜ</div>
            <p id="end-msg">–ì–æ—Ä–æ–¥ –æ—á–∏—â–µ–Ω.</p>
            <div class="win-val">
                <span id="win-amount">0</span>
                <span id="win-curr">$</span>
            </div>
            <button class="retry-btn" onclick="closeEndModal()">–í –°–õ–ï–î–£–Æ–©–ò–ô –†–ê–ó</button>
        </div>
    </div>

    <!-- –ò–Ω—Ñ–æ –æ —Ä–æ–ª—è—Ö -->
    <div id="modal-info" class="modal-overlay hidden">
        <div class="info-card">
            <div class="card-header">
                <h3>–î–û–°–¨–ï</h3>
                <button onclick="closeInfoModal()"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <div class="roles-list-scroll">
                <div class="role-item"><b>üïµÔ∏è –ú–∏—Ä–Ω—ã–π (x1.5):</b> –í—ã–≥–Ω–∞—Ç—å –º–∞—Ñ–∏—é.</div>
                <div class="role-item"><b>üåπ –ú–∞—Ñ–∏—è/–î–æ–Ω (x2.0):</b> –£–±–∏—Ç—å –≤—Å–µ—Ö.</div>
                <div class="role-item"><b>üëÆ –ö–æ–º–∏—Å—Å–∞—Ä (x1.8):</b> –ù–∞–π—Ç–∏ –º–∞—Ñ–∏—é.</div>
                <div class="role-item"><b>ü©∏ –ú–∞–Ω—å—è–∫ (x10):</b> –û—Å—Ç–∞—Ç—å—Å—è –æ–¥–Ω–æ–º—É.</div>
                <div class="role-item"><b>üíä –î–æ–∫—Ç–æ—Ä (x1.5):</b> –õ–µ—á–∏—Ç—å.</div>
                <div class="role-item"><b>üí£ –ö–∞–º–∏–∫–∞–¥–∑–µ (x15):</b> –£–º–µ—Ä–µ—Ç—å –∏ –∑–∞–±—Ä–∞—Ç—å –î–æ–Ω–∞.</div>
                <div class="role-item"><b>üíÄ –°–∞–º–æ—É–±–∏–π—Ü–∞ (x5):</b> –ë—ã—Ç—å –ø–æ–≤–µ—à–µ–Ω–Ω—ã–º.</div>
                <!-- –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ä–æ–ª–∏ –≤ JS –ª–æ–≥–∏–∫–µ -->
            </div>
        </div>
    </div>

    <!-- –ê—É–¥–∏–æ -->
    <div style="display:none;">
        <audio id="snd-shot" src="assets/shot_silencer.mp3"></audio>
        <audio id="snd-night" src="assets/night_ambience.mp3" loop></audio>
        <audio id="snd-vote" src="assets/vote.mp3"></audio>
        <audio id="snd-win" src="assets/win_dark.mp3"></audio>
        <audio id="snd-flip" src="assets/card_flip.mp3"></audio>
    </div>

    <script src="mafia.js"></script>
</body>
                  </html>
